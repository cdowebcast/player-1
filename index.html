<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Media Player</title>
    <link rel="stylesheet" href="main.css" type="text/css" media="screen">
</head>
<body>
    <div id="container"
        <table id="browser" cellspacing="0" cellpadding="0">
            <tr>
                <th id="artistHead">
                    <a href="#">Artists</a>
                </th>
                <th id="albumHead">
                    <a href="#">Albums</a>
                </th>
            </tr>
            <tr>
                <td id="artistPane" class="pane">
                    <ol>
                        <li class="odd selected">
                            <a href="#">The Lemonheads</a>
                        </li>
                        <li class="even">
                            <a href="#">Michael Jackson</a>
                        </li>
                        <li class="odd">
                            <a href="#">Radiohead</a>
                        </li>
                        <li class="even">
                            <a href="#">Avril Lavigne</a>
                        </li>
                        <li class="odd">
                            <a href="#">Coldplay</a>
                        </li>
                        <li class="even">
                            <a href="#">Honty and the Sea monkeys</a>
                        </li>
                        <li class="odd">
                            <a href="#">James Wheare</a>
                        </li>
                        <li class="even">
                            <a href="#">Mokele</a>
                        </li>
                        <li class="odd">
                            <a href="#">Ben Folds</a>
                        </li>
                        <li class="even">
                            <a href="#">Foo Fighters</a>
                        </li>
                    </ol>
                </td>
                <td id="albumPane" class="pane">
                    <ol>
                        <li class="odd">
                            <a href="#">Lick</a>
                        </li>
                        <li class="even">
                            <a href="#">Lovey</a>
                        </li>
                        <li class="odd">
                            <a href="#">The Lemonheads</a>
                        </li>
                        <li class="even">
                            <a href="#">Hate Your Friends</a>
                        </li>
                        <li class="odd selected">
                            <a href="#">It's a Shame About Ray</a>
                        </li>
                        <li class="even">
                            <a href="#">Come on Feel the Lemonheads</a>
                        </li>
                        <li class="odd">
                            <a href="#">Car, Button, Cloth</a>
                        </li>
                        <li class="even">
                            <a href="#">Varshons</a>
                        </li>
                        <li class="odd">
                            <a href="#">Schoolhouse Rocks</a>
                        </li>
                    </ol>
                </td>
            </tr>
            <tr>
                <td id="trackPane" class="pane" class="pane" colspan="2">
                    <table id="tracks" cellspacing="0" cellpadding="0">
                        <tr class="head" id="trackHead">
                            <th class="play">
                                <a href="#">&nbsp;</a>
                            </th>
                            <th>
                                <a href="#">Name</a>
                            </th>
                            <th>
                                <a href="#">Time</a>
                            </th>
                            <th>
                                <a href="#">Artist</a>
                            </th>
                            <th>
                                <a href="#">Album</a>
                            </th>
                        </tr>
                        <tr class="odd haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Rockin' Stroll</a>
                            </td>
                            <td>
                                <a href="#">1:46</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="even haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Confetti</a>
                            </td>
                            <td>
                                <a href="#">2:44</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="odd haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">It's A Shame About Ray</a>
                            </td>
                            <td>
                                <a href="#">3:07</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="even haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Rudderless</a>
                            </td>
                            <td>
                                <a href="#">3:19</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="odd haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">My Drug Buddy</a>
                            </td>
                            <td>
                                <a href="#">2:51</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="even haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">The Turnpike Down</a>
                            </td>
                            <td>
                                <a href="#">2:33</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="odd haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Bit Part</a>
                            </td>
                            <td>
                                <a href="#">1:51</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="even haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Alison's Starting To Happen</a>
                            </td>
                            <td>
                                <a href="#">1:59</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="odd haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Hannah &amp; Babi</a>
                            </td>
                            <td>
                                <a href="#">2:40</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="even haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Kitchen</a>
                            </td>
                            <td>
                                <a href="#">2:54</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="odd haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Ceiling Fan In My Spoon</a>
                            </td>
                            <td>
                                <a href="#">1:48</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="even haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Frank Mills</a>
                            </td>
                            <td>
                                <a href="#">1:43</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="odd haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Mrs. Robinson</a>
                            </td>
                            <td>
                                <a href="#">3:45</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="even haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Shaky Ground</a>
                            </td>
                            <td>
                                <a href="#">1:48</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">The Lemonheads</a>
                            </td>
                            <td>
                                <a href="#">It's a Shame About Ray</a>
                            </td>
                        </tr>
                        <tr class="odd haudio">
                            <td class="play">
                                <a href="#"><span class="resolved">-</span><span class="resolving">.</span><span class="notFound">&nbsp;</span></a>
                            </td>
                            <td>
                                <a href="#" class="fn">Take Control</a>
                            </td>
                            <td>
                                <a href="#">1:48</a>
                            </td>
                            <td>
                                <a href="#" class="contributor">James Wheare</a>
                            </td>
                            <td>
                                <a href="#">GCSE Composition</a>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>
    <script src="playdar.js"></script>
    <script src="soundmanager2-nodebug-jsmin.js"></script>
    <script>
        var auth_details = {
            name: "Media Player",
            website: "http://localhost/~james/player/",
            receiverurl: "http://localhost/~james/player/playdarauth.html"
        };
        
        Playdar.setup(auth_details);
        soundManager.url = 'soundmanager2_flash9.swf';
        soundManager.flashVersion = 9;
        soundManager.onload = function () {
            Playdar.setup_player(soundManager);
            Playdar.client.init();
        };
        
        var results_handler = function (response, final_answer) {
            if (final_answer) {
                var qidClass = 'q' + response.qid;
                var play = Playdar.Util.select('.' + qidClass);
                var className;
                if (response.results.length) {
                    var sid = response.results[0].sid;
                    className = 'resolved sid' + sid;
                    Playdar.player.register_stream(response.results[0]);
                } else {
                    className = 'notFound';
                }
                play[0].className = className + ' ' + qidClass;
            }
        };
        Playdar.client.register_results_handler(results_handler);
        
        var track_handler = function (track) {
            var qid = Playdar.Util.generate_uuid();
            var play = Playdar.Util.select('td.play a', track.element);
            play[0].className = 'resolving q' + qid;
            return qid;
        };
        Playdar.client.autodetect(track_handler);
        
        document.getElementById('tracks').onclick = function (event) {
            if (event.target.nodeName == 'A') {
                var classes = event.target.className.split(' ');
                for (var i = 0; i < classes.length; i++) {
                    console.log(classes[i].indexOf('sid'));
                    // var qid = qidClass.replace('q', '');
                    // Playdar.player.play_stream(sid);
                }
                
                return false;
            }
        }
    </script>
</body>
